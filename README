
******    RandSpg    ******


**** UNIX (LINUX \ OS X) COMPILATION ****

In order to compile, one simply needs cmake and a c++11 compiler.

For ubuntu, you may install cmake by entering "sudo apt-get install cmake"

Compilation instructions:

Enter the following into a terminal from the root randSpg directory

  mkdir build
  cd build
  cmake ..
  make -j3

The program should be compiled! This has been tested with GCC on Linux and OS X.

See "RUNNING THE PROGRAM" section below.


**** WINDOWS MSVC COMPILATION ****

In order to compile with VC on Windows, one needs cmake and MSVC 2013 or greater
(other Windows compilers may work as well, but the CMakeLists.txt or
code may need to be adjusted a little bit). It has been tested on VC 2013 and
VC 2015.

You will then need to open an MSVC command prompt (see
http://stackoverflow.com/questions/21476588/where-is-developer-command-prompt-for-vs2013
for an example of how to do this). The MSVC command prompt has all of the
environments set up like we need them to be.

From the MSVC command prompt, find the randSpg root directory, and then
type the following commands in the prompt:

  mkdir build
  cd build
  cmake .. -G "NMake Makefiles"
  nmake

If all goes well, your randSpg.exe file should now be present in the directory!

See "RUNNING THE PROGRAM" section below.


**** WINDOWS MINGW COMPILATION ****

You need to have cmake and the MinGW bin directory in your path for this to
work.

From a command prompt, find the randSpg root directory, and then
type the following commands in the prompt:

  mkdir build
  cd build
  cmake .. -G "MinGW Makefiles"
  mingw32-make

Or whatever your command is for "make" with mingw.
If all goes well, your randSpg.exe file should now be present in the directory!

See "RUNNING THE PROGRAM" section below.


**** RUNNING THE PROGRAM ****

To run the program, use the executable that is created in the build directory
as follows:
  ./randSpg <inputFileName>

A sample input file with instructions is included in the root
directory: randSpg.in. You may copy it to the build directory and then run

  ./randSpg randSpg.in

For the sample input file, the results are stored in a directory called
"randSpgOut" (may be changed in the input file), and log information is
stored in "randSpg.log". Check them out!

The results are stored as VASP POSCAR files. If you wish to convert them to
another file format, you may want to look into OpenBabel.


**** INSTRUCTIONS FOR CALLING RANDSPG FUNCTIONS IN YOUR OWN CODE ****

To generate a crystal with the desired space group,
one simply has to create an input struct and call
RandSpg::randSpgCrystal with it. The input struct has
four parameters in its constructor and are as follows:

randSpgInput(uint spg, const std::vector<uint>& atoms,
               const latticeStruct& lmins,
               const latticeStruct& lmaxes);

where spg is the space group to be generated, atoms is a vector
of atomic numbers (one for each atom), and lmins and lmaxes are the
mins and maxes, respectively, of the crystal lattice to be generated.

A latticeStruct constructor is as follows:

latticeStruct(double a, double b, double c,
              double alpha, double beta, double gamma);

where a, b, and c are the lengths of the lattice vectors in Angstroms and
alpha, beta, and gamma are the angles (in degrees) of the lattice. One
latticeStruct needs to be made for the minimum values, and one needs to be
made for the maximum values for the randSpg input.


The input struct contains data members
that are defined as follows:

struct randSpgInput {
  // The space group to be generated. Set in constructor.
  uint spg;

  // The vector of atomic numbers. Set in constructor.
  std::vector<uint> atoms;

  // The min values for the lattice. Set in constructor.
  latticeStruct latticeMins;

  // The max values for the lattice. Set in constructor.
  latticeStruct latticeMaxes;

  // Scaling factor for interatomic distances. For example, "0.5" would imply
  // that all atomic radii are 0.5 of their original value. Default is 1.0.
  double IADScalingFactor;

  // Minimum radius for atomic radii in Angstroms. All atomic radii below this
  // radius will be set to this value. Default is 0.0
  double minRadius;

  // A vector of pairs. Each pair is an atomic number followed by a radius in
  // Angstroms. You may append to this vector to set your own radii. The
  // default is that it is empty.
  std::vector<std::pair<uint, double>> manualAtomicRadii;

  // Minimum volume for the final crystal in Angstroms cubed. Default is
  // -1 (No min volume).
  double minVolume;

  // Maximum volume for the final crystal in Angstroms cubed. Default is
  // -1 (No max volume).
  double maxVolume;

  // A vector of pairs. Each pair is an atomic number followed by a char
  // representing a Wyckoff letter. This essentially "forces" the program
  // to use the specified atomic number for the Wyckoff position defined by the
  // Wyckoff letter. If you wish to have an atom type in a Wyckoff position
  // multiple times, just add to this vector multiple items of it.
  std::vector<std::pair<uint, char>> forcedWyckAssignments;

  // Verbosity for log file printing. 'v' for verbose (prints all possibilities
  // found), 'r' for regular (prints Wyckoff assignments), or 'n' for none
  // (prints nothing other than what the options were set to). Default is 'n'
  char verbosity;

  // Max number of attempts to satisfy the minIAD requirements when placing
  // atoms in the Wyckoff positions. If it fails this many times, it will abort
  // the operation. Default is 100.
  int maxAttempts;

  // This forces the program to use the most general Wyckoff position at
  // least once. This ensures that the crystal will be of the correct space
  // group. If this is not set to true, then more compositions are possible for
  // some space groups, but the final space group will not be guaranteed to be
  // the correct space group. Default is true.
  bool forceMostGeneralWyckPos;
}

After leaving these options as their default values or setting them,
you may call RandSpg::randSpgCrystal(randSpgInput input) by using the
input as the parameter. A crystal object is returned. Basic
functions for a Crystal object are:

getLattice(); // Returns a latticeStruct with the lattice parameters set. Lattice structs are defined above.

getAtoms(); // Returns a vector<atomStruct>. atomStructs are simple structs that contain members unsigned int "atomicNum" for the atomic number and doubles for "x", "y", and "z" in fractional coordinates.

writePOSCAR(const string& filename, const string& title); // Writes a POSCAR file from the data contained in the crystal to the path given to it by "filename." The "title" parameter is the title located in the first line of the POSCAR.

More info is given in the header files of these classes.

A static library ("libRandSpgLib.a") is generated by default from the
CMakeLists.txt settings. You'll then just need to link to this library.
